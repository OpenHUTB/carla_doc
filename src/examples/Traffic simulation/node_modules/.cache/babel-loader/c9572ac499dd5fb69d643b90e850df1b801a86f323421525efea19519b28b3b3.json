{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pie = pie;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _updater = require(\"../class/updater.class\");\nvar _pie = require(\"../config/pie\");\nvar _util = require(\"@jiaminghi/c-render/lib/plugin/util\");\nvar _util2 = require(\"../util\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction pie(chart) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var series = option.series;\n  if (!series) series = [];\n  var pies = (0, _util2.initNeedSeries)(series, _pie.pieConfig, 'pie');\n  pies = calcPiesCenter(pies, chart);\n  pies = calcPiesRadius(pies, chart);\n  pies = calcRosePiesRadius(pies, chart);\n  pies = calcPiesPercent(pies);\n  pies = calcPiesAngle(pies, chart);\n  pies = calcPiesInsideLabelPos(pies);\n  pies = calcPiesEdgeCenterPos(pies);\n  pies = calcPiesOutSideLabelPos(pies);\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pie',\n    getGraphConfig: getPieConfig,\n    getStartGraphConfig: getStartPieConfig,\n    beforeChange: beforeChangePie\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pieInsideLabel',\n    getGraphConfig: getInsideLabelConfig\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pieOutsideLabelLine',\n    getGraphConfig: getOutsideLabelLineConfig,\n    getStartGraphConfig: getStartOutsideLabelLineConfig\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pieOutsideLabel',\n    getGraphConfig: getOutsideLabelConfig,\n    getStartGraphConfig: getStartOutsideLabelConfig\n  });\n}\nfunction calcPiesCenter(pies, chart) {\n  var area = chart.render.area;\n  pies.forEach(function (pie) {\n    var center = pie.center;\n    center = center.map(function (pos, i) {\n      if (typeof pos === 'number') return pos;\n      return parseInt(pos) / 100 * area[i];\n    });\n    pie.center = center;\n  });\n  return pies;\n}\nfunction calcPiesRadius(pies, chart) {\n  var maxRadius = Math.min.apply(Math, (0, _toConsumableArray2[\"default\"])(chart.render.area)) / 2;\n  pies.forEach(function (pie) {\n    var radius = pie.radius,\n      data = pie.data;\n    radius = getNumberRadius(radius, maxRadius);\n    data.forEach(function (item) {\n      var itemRadius = item.radius;\n      if (!itemRadius) itemRadius = radius;\n      itemRadius = getNumberRadius(itemRadius, maxRadius);\n      item.radius = itemRadius;\n    });\n    pie.radius = radius;\n  });\n  return pies;\n}\nfunction getNumberRadius(radius, maxRadius) {\n  if (!(radius instanceof Array)) radius = [0, radius];\n  radius = radius.map(function (r) {\n    if (typeof r === 'number') return r;\n    return parseInt(r) / 100 * maxRadius;\n  });\n  return radius;\n}\nfunction calcRosePiesRadius(pies, chart) {\n  var rosePie = pies.filter(function (_ref) {\n    var roseType = _ref.roseType;\n    return roseType;\n  });\n  rosePie.forEach(function (pie) {\n    var radius = pie.radius,\n      data = pie.data,\n      roseSort = pie.roseSort;\n    var roseIncrement = getRoseIncrement(pie);\n    var dataCopy = (0, _toConsumableArray2[\"default\"])(data);\n    data = sortData(data);\n    data.forEach(function (item, i) {\n      item.radius[1] = radius[1] - roseIncrement * i;\n    });\n    if (roseSort) {\n      data.reverse();\n    } else {\n      pie.data = dataCopy;\n    }\n    pie.roseIncrement = roseIncrement;\n  });\n  return pies;\n}\nfunction sortData(data) {\n  return data.sort(function (_ref2, _ref3) {\n    var a = _ref2.value;\n    var b = _ref3.value;\n    if (a === b) return 0;\n    if (a > b) return -1;\n    if (a < b) return 1;\n  });\n}\nfunction getRoseIncrement(pie) {\n  var radius = pie.radius,\n    roseIncrement = pie.roseIncrement;\n  if (typeof roseIncrement === 'number') return roseIncrement;\n  if (roseIncrement === 'auto') {\n    var data = pie.data;\n    var allRadius = data.reduce(function (all, _ref4) {\n      var radius = _ref4.radius;\n      return [].concat((0, _toConsumableArray2[\"default\"])(all), (0, _toConsumableArray2[\"default\"])(radius));\n    }, []);\n    var minRadius = Math.min.apply(Math, (0, _toConsumableArray2[\"default\"])(allRadius));\n    var maxRadius = Math.max.apply(Math, (0, _toConsumableArray2[\"default\"])(allRadius));\n    return (maxRadius - minRadius) * 0.6 / (data.length - 1 || 1);\n  }\n  return parseInt(roseIncrement) / 100 * radius[1];\n}\nfunction calcPiesPercent(pies) {\n  pies.forEach(function (pie) {\n    var data = pie.data,\n      percentToFixed = pie.percentToFixed;\n    var sum = getDataSum(data);\n    data.forEach(function (item) {\n      var value = item.value;\n      item.percent = value / sum * 100;\n      item.percentForLabel = toFixedNoCeil(value / sum * 100, percentToFixed);\n    });\n    var percentSumNoLast = (0, _util2.mulAdd)(data.slice(0, -1).map(function (_ref5) {\n      var percent = _ref5.percent;\n      return percent;\n    }));\n    data.slice(-1)[0].percent = 100 - percentSumNoLast;\n    data.slice(-1)[0].percentForLabel = toFixedNoCeil(100 - percentSumNoLast, percentToFixed);\n  });\n  return pies;\n}\nfunction toFixedNoCeil(number) {\n  var toFixed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var stringNumber = number.toString();\n  var splitedNumber = stringNumber.split('.');\n  var decimal = splitedNumber[1] || '0';\n  var fixedDecimal = decimal.slice(0, toFixed);\n  splitedNumber[1] = fixedDecimal;\n  return parseFloat(splitedNumber.join('.'));\n}\nfunction getDataSum(data) {\n  return (0, _util2.mulAdd)(data.map(function (_ref6) {\n    var value = _ref6.value;\n    return value;\n  }));\n}\nfunction calcPiesAngle(pies) {\n  pies.forEach(function (pie) {\n    var start = pie.startAngle,\n      data = pie.data;\n    data.forEach(function (item, i) {\n      var _getDataAngle = getDataAngle(data, i),\n        _getDataAngle2 = (0, _slicedToArray2[\"default\"])(_getDataAngle, 2),\n        startAngle = _getDataAngle2[0],\n        endAngle = _getDataAngle2[1];\n      item.startAngle = start + startAngle;\n      item.endAngle = start + endAngle;\n    });\n  });\n  return pies;\n}\nfunction getDataAngle(data, i) {\n  var fullAngle = Math.PI * 2;\n  var needAddData = data.slice(0, i + 1);\n  var percentSum = (0, _util2.mulAdd)(needAddData.map(function (_ref7) {\n    var percent = _ref7.percent;\n    return percent;\n  }));\n  var percent = data[i].percent;\n  var startPercent = percentSum - percent;\n  return [fullAngle * startPercent / 100, fullAngle * percentSum / 100];\n}\nfunction calcPiesInsideLabelPos(pies) {\n  pies.forEach(function (pieItem) {\n    var data = pieItem.data;\n    data.forEach(function (item) {\n      item.insideLabelPos = getPieInsideLabelPos(pieItem, item);\n    });\n  });\n  return pies;\n}\nfunction getPieInsideLabelPos(pieItem, dataItem) {\n  var center = pieItem.center;\n  var startAngle = dataItem.startAngle,\n    endAngle = dataItem.endAngle,\n    _dataItem$radius = (0, _slicedToArray2[\"default\"])(dataItem.radius, 2),\n    ir = _dataItem$radius[0],\n    or = _dataItem$radius[1];\n  var radius = (ir + or) / 2;\n  var angle = (startAngle + endAngle) / 2;\n  return _util.getCircleRadianPoint.apply(void 0, (0, _toConsumableArray2[\"default\"])(center).concat([radius, angle]));\n}\nfunction calcPiesEdgeCenterPos(pies) {\n  pies.forEach(function (pie) {\n    var data = pie.data,\n      center = pie.center;\n    data.forEach(function (item) {\n      var startAngle = item.startAngle,\n        endAngle = item.endAngle,\n        radius = item.radius;\n      var centerAngle = (startAngle + endAngle) / 2;\n      var pos = _util.getCircleRadianPoint.apply(void 0, (0, _toConsumableArray2[\"default\"])(center).concat([radius[1], centerAngle]));\n      item.edgeCenterPos = pos;\n    });\n  });\n  return pies;\n}\nfunction calcPiesOutSideLabelPos(pies) {\n  pies.forEach(function (pieItem) {\n    var leftPieDataItems = getLeftOrRightPieDataItems(pieItem);\n    var rightPieDataItems = getLeftOrRightPieDataItems(pieItem, false);\n    leftPieDataItems = sortPiesFromTopToBottom(leftPieDataItems);\n    rightPieDataItems = sortPiesFromTopToBottom(rightPieDataItems);\n    addLabelLineAndAlign(leftPieDataItems, pieItem);\n    addLabelLineAndAlign(rightPieDataItems, pieItem, false);\n  });\n  return pies;\n}\nfunction getLabelLineBendRadius(pieItem) {\n  var labelLineBendGap = pieItem.outsideLabel.labelLineBendGap;\n  var maxRadius = getPieMaxRadius(pieItem);\n  if (typeof labelLineBendGap !== 'number') {\n    labelLineBendGap = parseInt(labelLineBendGap) / 100 * maxRadius;\n  }\n  return labelLineBendGap + maxRadius;\n}\nfunction getPieMaxRadius(pieItem) {\n  var data = pieItem.data;\n  var radius = data.map(function (_ref8) {\n    var _ref8$radius = (0, _slicedToArray2[\"default\"])(_ref8.radius, 2),\n      foo = _ref8$radius[0],\n      r = _ref8$radius[1];\n    return r;\n  });\n  return Math.max.apply(Math, (0, _toConsumableArray2[\"default\"])(radius));\n}\nfunction getLeftOrRightPieDataItems(pieItem) {\n  var left = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var data = pieItem.data,\n    center = pieItem.center;\n  var centerXPos = center[0];\n  return data.filter(function (_ref9) {\n    var edgeCenterPos = _ref9.edgeCenterPos;\n    var xPos = edgeCenterPos[0];\n    if (left) return xPos <= centerXPos;\n    return xPos > centerXPos;\n  });\n}\nfunction sortPiesFromTopToBottom(dataItem) {\n  dataItem.sort(function (_ref10, _ref11) {\n    var _ref10$edgeCenterPos = (0, _slicedToArray2[\"default\"])(_ref10.edgeCenterPos, 2),\n      t = _ref10$edgeCenterPos[0],\n      ay = _ref10$edgeCenterPos[1];\n    var _ref11$edgeCenterPos = (0, _slicedToArray2[\"default\"])(_ref11.edgeCenterPos, 2),\n      tt = _ref11$edgeCenterPos[0],\n      by = _ref11$edgeCenterPos[1];\n    if (ay > by) return 1;\n    if (ay < by) return -1;\n    if (ay === by) return 0;\n  });\n  return dataItem;\n}\nfunction addLabelLineAndAlign(dataItem, pieItem) {\n  var left = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var center = pieItem.center,\n    outsideLabel = pieItem.outsideLabel;\n  var radius = getLabelLineBendRadius(pieItem);\n  dataItem.forEach(function (item) {\n    var edgeCenterPos = item.edgeCenterPos,\n      startAngle = item.startAngle,\n      endAngle = item.endAngle;\n    var labelLineEndLength = outsideLabel.labelLineEndLength;\n    var angle = (startAngle + endAngle) / 2;\n    var bendPoint = _util.getCircleRadianPoint.apply(void 0, (0, _toConsumableArray2[\"default\"])(center).concat([radius, angle]));\n    var endPoint = (0, _toConsumableArray2[\"default\"])(bendPoint);\n    endPoint[0] += labelLineEndLength * (left ? -1 : 1);\n    item.labelLine = [edgeCenterPos, bendPoint, endPoint];\n    item.labelLineLength = (0, _util2.getPolylineLength)(item.labelLine);\n    item.align = {\n      textAlign: 'left',\n      textBaseline: 'middle'\n    };\n    if (left) item.align.textAlign = 'right';\n  });\n}\nfunction getPieConfig(pieItem) {\n  var data = pieItem.data,\n    animationCurve = pieItem.animationCurve,\n    animationFrame = pieItem.animationFrame,\n    rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'pie',\n      index: rLevel,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getPieShape(pieItem, i),\n      style: getPieStyle(pieItem, i)\n    };\n  });\n}\nfunction getStartPieConfig(pieItem) {\n  var animationDelayGap = pieItem.animationDelayGap,\n    startAnimationCurve = pieItem.startAnimationCurve;\n  var configs = getPieConfig(pieItem);\n  configs.forEach(function (config, i) {\n    config.animationCurve = startAnimationCurve;\n    config.animationDelay = i * animationDelayGap;\n    config.shape.or = config.shape.ir;\n  });\n  return configs;\n}\nfunction beforeChangePie(graph) {\n  graph.animationDelay = 0;\n}\nfunction getPieShape(pieItem, i) {\n  var center = pieItem.center,\n    data = pieItem.data;\n  var dataItem = data[i];\n  var radius = dataItem.radius,\n    startAngle = dataItem.startAngle,\n    endAngle = dataItem.endAngle;\n  return {\n    startAngle: startAngle,\n    endAngle: endAngle,\n    ir: radius[0],\n    or: radius[1],\n    rx: center[0],\n    ry: center[1]\n  };\n}\nfunction getPieStyle(pieItem, i) {\n  var pieStyle = pieItem.pieStyle,\n    data = pieItem.data;\n  var dataItem = data[i];\n  var color = dataItem.color;\n  return (0, _util2.deepMerge)({\n    fill: color\n  }, pieStyle);\n}\nfunction getInsideLabelConfig(pieItem) {\n  var animationCurve = pieItem.animationCurve,\n    animationFrame = pieItem.animationFrame,\n    data = pieItem.data,\n    rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'text',\n      index: rLevel,\n      visible: pieItem.insideLabel.show,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getInsideLabelShape(pieItem, i),\n      style: getInsideLabelStyle(pieItem, i)\n    };\n  });\n}\nfunction getInsideLabelShape(pieItem, i) {\n  var insideLabel = pieItem.insideLabel,\n    data = pieItem.data;\n  var formatter = insideLabel.formatter;\n  var dataItem = data[i];\n  var formatterType = (0, _typeof2[\"default\"])(formatter);\n  var label = '';\n  if (formatterType === 'string') {\n    label = formatter.replace('{name}', dataItem.name);\n    label = label.replace('{percent}', dataItem.percentForLabel);\n    label = label.replace('{value}', dataItem.value);\n  }\n  if (formatterType === 'function') {\n    label = formatter(dataItem);\n  }\n  return {\n    content: label,\n    position: dataItem.insideLabelPos\n  };\n}\nfunction getInsideLabelStyle(pieItem, i) {\n  var style = pieItem.insideLabel.style;\n  return style;\n}\nfunction getOutsideLabelLineConfig(pieItem) {\n  var animationCurve = pieItem.animationCurve,\n    animationFrame = pieItem.animationFrame,\n    data = pieItem.data,\n    rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'polyline',\n      index: rLevel,\n      visible: pieItem.outsideLabel.show,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getOutsideLabelLineShape(pieItem, i),\n      style: getOutsideLabelLineStyle(pieItem, i)\n    };\n  });\n}\nfunction getStartOutsideLabelLineConfig(pieItem) {\n  var data = pieItem.data;\n  var configs = getOutsideLabelLineConfig(pieItem);\n  configs.forEach(function (config, i) {\n    config.style.lineDash = [0, data[i].labelLineLength];\n  });\n  return configs;\n}\nfunction getOutsideLabelLineShape(pieItem, i) {\n  var data = pieItem.data;\n  var dataItem = data[i];\n  return {\n    points: dataItem.labelLine\n  };\n}\nfunction getOutsideLabelLineStyle(pieItem, i) {\n  var outsideLabel = pieItem.outsideLabel,\n    data = pieItem.data;\n  var labelLineStyle = outsideLabel.labelLineStyle;\n  var color = data[i].color;\n  return (0, _util2.deepMerge)({\n    stroke: color,\n    lineDash: [data[i].labelLineLength, 0]\n  }, labelLineStyle);\n}\nfunction getOutsideLabelConfig(pieItem) {\n  var animationCurve = pieItem.animationCurve,\n    animationFrame = pieItem.animationFrame,\n    data = pieItem.data,\n    rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'text',\n      index: rLevel,\n      visible: pieItem.outsideLabel.show,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getOutsideLabelShape(pieItem, i),\n      style: getOutsideLabelStyle(pieItem, i)\n    };\n  });\n}\nfunction getStartOutsideLabelConfig(pieItem) {\n  var data = pieItem.data;\n  var configs = getOutsideLabelConfig(pieItem);\n  configs.forEach(function (config, i) {\n    config.shape.position = data[i].labelLine[1];\n  });\n  return configs;\n}\nfunction getOutsideLabelShape(pieItem, i) {\n  var outsideLabel = pieItem.outsideLabel,\n    data = pieItem.data;\n  var formatter = outsideLabel.formatter;\n  var _data$i = data[i],\n    labelLine = _data$i.labelLine,\n    name = _data$i.name,\n    percentForLabel = _data$i.percentForLabel,\n    value = _data$i.value;\n  var formatterType = (0, _typeof2[\"default\"])(formatter);\n  var label = '';\n  if (formatterType === 'string') {\n    label = formatter.replace('{name}', name);\n    label = label.replace('{percent}', percentForLabel);\n    label = label.replace('{value}', value);\n  }\n  if (formatterType === 'function') {\n    label = formatter(data[i]);\n  }\n  return {\n    content: label,\n    position: labelLine[2]\n  };\n}\nfunction getOutsideLabelStyle(pieItem, i) {\n  var outsideLabel = pieItem.outsideLabel,\n    data = pieItem.data;\n  var _data$i2 = data[i],\n    color = _data$i2.color,\n    align = _data$i2.align;\n  var style = outsideLabel.style;\n  return (0, _util2.deepMerge)(_objectSpread({\n    fill: color\n  }, align), style);\n}","map":{"version":3,"names":["require","_interopRequireDefault","Object","defineProperty","exports","value","pie","_defineProperty2","_typeof2","_slicedToArray2","_toConsumableArray2","_updater","_pie","_util","_util2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","chart","option","undefined","series","pies","initNeedSeries","pieConfig","calcPiesCenter","calcPiesRadius","calcRosePiesRadius","calcPiesPercent","calcPiesAngle","calcPiesInsideLabelPos","calcPiesEdgeCenterPos","calcPiesOutSideLabelPos","doUpdate","getGraphConfig","getPieConfig","getStartGraphConfig","getStartPieConfig","beforeChange","beforeChangePie","getInsideLabelConfig","getOutsideLabelLineConfig","getStartOutsideLabelLineConfig","getOutsideLabelConfig","getStartOutsideLabelConfig","area","render","center","map","pos","parseInt","maxRadius","Math","min","radius","data","getNumberRadius","item","itemRadius","Array","r","rosePie","_ref","roseType","roseSort","roseIncrement","getRoseIncrement","dataCopy","sortData","reverse","sort","_ref2","_ref3","a","b","allRadius","reduce","all","_ref4","concat","minRadius","max","percentToFixed","sum","getDataSum","percent","percentForLabel","toFixedNoCeil","percentSumNoLast","mulAdd","slice","_ref5","number","toFixed","stringNumber","toString","splitedNumber","split","decimal","fixedDecimal","parseFloat","join","_ref6","start","startAngle","_getDataAngle","getDataAngle","_getDataAngle2","endAngle","fullAngle","PI","needAddData","percentSum","_ref7","startPercent","pieItem","insideLabelPos","getPieInsideLabelPos","dataItem","_dataItem$radius","ir","or","angle","getCircleRadianPoint","centerAngle","edgeCenterPos","leftPieDataItems","getLeftOrRightPieDataItems","rightPieDataItems","sortPiesFromTopToBottom","addLabelLineAndAlign","getLabelLineBendRadius","labelLineBendGap","outsideLabel","getPieMaxRadius","_ref8","_ref8$radius","foo","left","centerXPos","_ref9","xPos","_ref10","_ref11","_ref10$edgeCenterPos","t","ay","_ref11$edgeCenterPos","tt","by","labelLineEndLength","bendPoint","endPoint","labelLine","labelLineLength","getPolylineLength","align","textAlign","textBaseline","animationCurve","animationFrame","rLevel","name","index","shape","getPieShape","style","getPieStyle","animationDelayGap","startAnimationCurve","configs","config","animationDelay","graph","rx","ry","pieStyle","color","deepMerge","fill","visible","insideLabel","show","getInsideLabelShape","getInsideLabelStyle","formatter","formatterType","label","replace","content","position","getOutsideLabelLineShape","getOutsideLabelLineStyle","lineDash","points","labelLineStyle","stroke","getOutsideLabelShape","getOutsideLabelStyle","_data$i","_data$i2"],"sources":["D:/doc/workplace/vscode/vue03/node_modules/@jiaminghi/charts/lib/core/pie.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pie = pie;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _updater = require(\"../class/updater.class\");\n\nvar _pie = require(\"../config/pie\");\n\nvar _util = require(\"@jiaminghi/c-render/lib/plugin/util\");\n\nvar _util2 = require(\"../util\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction pie(chart) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var series = option.series;\n  if (!series) series = [];\n  var pies = (0, _util2.initNeedSeries)(series, _pie.pieConfig, 'pie');\n  pies = calcPiesCenter(pies, chart);\n  pies = calcPiesRadius(pies, chart);\n  pies = calcRosePiesRadius(pies, chart);\n  pies = calcPiesPercent(pies);\n  pies = calcPiesAngle(pies, chart);\n  pies = calcPiesInsideLabelPos(pies);\n  pies = calcPiesEdgeCenterPos(pies);\n  pies = calcPiesOutSideLabelPos(pies);\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pie',\n    getGraphConfig: getPieConfig,\n    getStartGraphConfig: getStartPieConfig,\n    beforeChange: beforeChangePie\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pieInsideLabel',\n    getGraphConfig: getInsideLabelConfig\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pieOutsideLabelLine',\n    getGraphConfig: getOutsideLabelLineConfig,\n    getStartGraphConfig: getStartOutsideLabelLineConfig\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: pies,\n    key: 'pieOutsideLabel',\n    getGraphConfig: getOutsideLabelConfig,\n    getStartGraphConfig: getStartOutsideLabelConfig\n  });\n}\n\nfunction calcPiesCenter(pies, chart) {\n  var area = chart.render.area;\n  pies.forEach(function (pie) {\n    var center = pie.center;\n    center = center.map(function (pos, i) {\n      if (typeof pos === 'number') return pos;\n      return parseInt(pos) / 100 * area[i];\n    });\n    pie.center = center;\n  });\n  return pies;\n}\n\nfunction calcPiesRadius(pies, chart) {\n  var maxRadius = Math.min.apply(Math, (0, _toConsumableArray2[\"default\"])(chart.render.area)) / 2;\n  pies.forEach(function (pie) {\n    var radius = pie.radius,\n        data = pie.data;\n    radius = getNumberRadius(radius, maxRadius);\n    data.forEach(function (item) {\n      var itemRadius = item.radius;\n      if (!itemRadius) itemRadius = radius;\n      itemRadius = getNumberRadius(itemRadius, maxRadius);\n      item.radius = itemRadius;\n    });\n    pie.radius = radius;\n  });\n  return pies;\n}\n\nfunction getNumberRadius(radius, maxRadius) {\n  if (!(radius instanceof Array)) radius = [0, radius];\n  radius = radius.map(function (r) {\n    if (typeof r === 'number') return r;\n    return parseInt(r) / 100 * maxRadius;\n  });\n  return radius;\n}\n\nfunction calcRosePiesRadius(pies, chart) {\n  var rosePie = pies.filter(function (_ref) {\n    var roseType = _ref.roseType;\n    return roseType;\n  });\n  rosePie.forEach(function (pie) {\n    var radius = pie.radius,\n        data = pie.data,\n        roseSort = pie.roseSort;\n    var roseIncrement = getRoseIncrement(pie);\n    var dataCopy = (0, _toConsumableArray2[\"default\"])(data);\n    data = sortData(data);\n    data.forEach(function (item, i) {\n      item.radius[1] = radius[1] - roseIncrement * i;\n    });\n\n    if (roseSort) {\n      data.reverse();\n    } else {\n      pie.data = dataCopy;\n    }\n\n    pie.roseIncrement = roseIncrement;\n  });\n  return pies;\n}\n\nfunction sortData(data) {\n  return data.sort(function (_ref2, _ref3) {\n    var a = _ref2.value;\n    var b = _ref3.value;\n    if (a === b) return 0;\n    if (a > b) return -1;\n    if (a < b) return 1;\n  });\n}\n\nfunction getRoseIncrement(pie) {\n  var radius = pie.radius,\n      roseIncrement = pie.roseIncrement;\n  if (typeof roseIncrement === 'number') return roseIncrement;\n\n  if (roseIncrement === 'auto') {\n    var data = pie.data;\n    var allRadius = data.reduce(function (all, _ref4) {\n      var radius = _ref4.radius;\n      return [].concat((0, _toConsumableArray2[\"default\"])(all), (0, _toConsumableArray2[\"default\"])(radius));\n    }, []);\n    var minRadius = Math.min.apply(Math, (0, _toConsumableArray2[\"default\"])(allRadius));\n    var maxRadius = Math.max.apply(Math, (0, _toConsumableArray2[\"default\"])(allRadius));\n    return (maxRadius - minRadius) * 0.6 / (data.length - 1 || 1);\n  }\n\n  return parseInt(roseIncrement) / 100 * radius[1];\n}\n\nfunction calcPiesPercent(pies) {\n  pies.forEach(function (pie) {\n    var data = pie.data,\n        percentToFixed = pie.percentToFixed;\n    var sum = getDataSum(data);\n    data.forEach(function (item) {\n      var value = item.value;\n      item.percent = value / sum * 100;\n      item.percentForLabel = toFixedNoCeil(value / sum * 100, percentToFixed);\n    });\n    var percentSumNoLast = (0, _util2.mulAdd)(data.slice(0, -1).map(function (_ref5) {\n      var percent = _ref5.percent;\n      return percent;\n    }));\n    data.slice(-1)[0].percent = 100 - percentSumNoLast;\n    data.slice(-1)[0].percentForLabel = toFixedNoCeil(100 - percentSumNoLast, percentToFixed);\n  });\n  return pies;\n}\n\nfunction toFixedNoCeil(number) {\n  var toFixed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var stringNumber = number.toString();\n  var splitedNumber = stringNumber.split('.');\n  var decimal = splitedNumber[1] || '0';\n  var fixedDecimal = decimal.slice(0, toFixed);\n  splitedNumber[1] = fixedDecimal;\n  return parseFloat(splitedNumber.join('.'));\n}\n\nfunction getDataSum(data) {\n  return (0, _util2.mulAdd)(data.map(function (_ref6) {\n    var value = _ref6.value;\n    return value;\n  }));\n}\n\nfunction calcPiesAngle(pies) {\n  pies.forEach(function (pie) {\n    var start = pie.startAngle,\n        data = pie.data;\n    data.forEach(function (item, i) {\n      var _getDataAngle = getDataAngle(data, i),\n          _getDataAngle2 = (0, _slicedToArray2[\"default\"])(_getDataAngle, 2),\n          startAngle = _getDataAngle2[0],\n          endAngle = _getDataAngle2[1];\n\n      item.startAngle = start + startAngle;\n      item.endAngle = start + endAngle;\n    });\n  });\n  return pies;\n}\n\nfunction getDataAngle(data, i) {\n  var fullAngle = Math.PI * 2;\n  var needAddData = data.slice(0, i + 1);\n  var percentSum = (0, _util2.mulAdd)(needAddData.map(function (_ref7) {\n    var percent = _ref7.percent;\n    return percent;\n  }));\n  var percent = data[i].percent;\n  var startPercent = percentSum - percent;\n  return [fullAngle * startPercent / 100, fullAngle * percentSum / 100];\n}\n\nfunction calcPiesInsideLabelPos(pies) {\n  pies.forEach(function (pieItem) {\n    var data = pieItem.data;\n    data.forEach(function (item) {\n      item.insideLabelPos = getPieInsideLabelPos(pieItem, item);\n    });\n  });\n  return pies;\n}\n\nfunction getPieInsideLabelPos(pieItem, dataItem) {\n  var center = pieItem.center;\n\n  var startAngle = dataItem.startAngle,\n      endAngle = dataItem.endAngle,\n      _dataItem$radius = (0, _slicedToArray2[\"default\"])(dataItem.radius, 2),\n      ir = _dataItem$radius[0],\n      or = _dataItem$radius[1];\n\n  var radius = (ir + or) / 2;\n  var angle = (startAngle + endAngle) / 2;\n  return _util.getCircleRadianPoint.apply(void 0, (0, _toConsumableArray2[\"default\"])(center).concat([radius, angle]));\n}\n\nfunction calcPiesEdgeCenterPos(pies) {\n  pies.forEach(function (pie) {\n    var data = pie.data,\n        center = pie.center;\n    data.forEach(function (item) {\n      var startAngle = item.startAngle,\n          endAngle = item.endAngle,\n          radius = item.radius;\n      var centerAngle = (startAngle + endAngle) / 2;\n\n      var pos = _util.getCircleRadianPoint.apply(void 0, (0, _toConsumableArray2[\"default\"])(center).concat([radius[1], centerAngle]));\n\n      item.edgeCenterPos = pos;\n    });\n  });\n  return pies;\n}\n\nfunction calcPiesOutSideLabelPos(pies) {\n  pies.forEach(function (pieItem) {\n    var leftPieDataItems = getLeftOrRightPieDataItems(pieItem);\n    var rightPieDataItems = getLeftOrRightPieDataItems(pieItem, false);\n    leftPieDataItems = sortPiesFromTopToBottom(leftPieDataItems);\n    rightPieDataItems = sortPiesFromTopToBottom(rightPieDataItems);\n    addLabelLineAndAlign(leftPieDataItems, pieItem);\n    addLabelLineAndAlign(rightPieDataItems, pieItem, false);\n  });\n  return pies;\n}\n\nfunction getLabelLineBendRadius(pieItem) {\n  var labelLineBendGap = pieItem.outsideLabel.labelLineBendGap;\n  var maxRadius = getPieMaxRadius(pieItem);\n\n  if (typeof labelLineBendGap !== 'number') {\n    labelLineBendGap = parseInt(labelLineBendGap) / 100 * maxRadius;\n  }\n\n  return labelLineBendGap + maxRadius;\n}\n\nfunction getPieMaxRadius(pieItem) {\n  var data = pieItem.data;\n  var radius = data.map(function (_ref8) {\n    var _ref8$radius = (0, _slicedToArray2[\"default\"])(_ref8.radius, 2),\n        foo = _ref8$radius[0],\n        r = _ref8$radius[1];\n\n    return r;\n  });\n  return Math.max.apply(Math, (0, _toConsumableArray2[\"default\"])(radius));\n}\n\nfunction getLeftOrRightPieDataItems(pieItem) {\n  var left = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var data = pieItem.data,\n      center = pieItem.center;\n  var centerXPos = center[0];\n  return data.filter(function (_ref9) {\n    var edgeCenterPos = _ref9.edgeCenterPos;\n    var xPos = edgeCenterPos[0];\n    if (left) return xPos <= centerXPos;\n    return xPos > centerXPos;\n  });\n}\n\nfunction sortPiesFromTopToBottom(dataItem) {\n  dataItem.sort(function (_ref10, _ref11) {\n    var _ref10$edgeCenterPos = (0, _slicedToArray2[\"default\"])(_ref10.edgeCenterPos, 2),\n        t = _ref10$edgeCenterPos[0],\n        ay = _ref10$edgeCenterPos[1];\n\n    var _ref11$edgeCenterPos = (0, _slicedToArray2[\"default\"])(_ref11.edgeCenterPos, 2),\n        tt = _ref11$edgeCenterPos[0],\n        by = _ref11$edgeCenterPos[1];\n\n    if (ay > by) return 1;\n    if (ay < by) return -1;\n    if (ay === by) return 0;\n  });\n  return dataItem;\n}\n\nfunction addLabelLineAndAlign(dataItem, pieItem) {\n  var left = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var center = pieItem.center,\n      outsideLabel = pieItem.outsideLabel;\n  var radius = getLabelLineBendRadius(pieItem);\n  dataItem.forEach(function (item) {\n    var edgeCenterPos = item.edgeCenterPos,\n        startAngle = item.startAngle,\n        endAngle = item.endAngle;\n    var labelLineEndLength = outsideLabel.labelLineEndLength;\n    var angle = (startAngle + endAngle) / 2;\n\n    var bendPoint = _util.getCircleRadianPoint.apply(void 0, (0, _toConsumableArray2[\"default\"])(center).concat([radius, angle]));\n\n    var endPoint = (0, _toConsumableArray2[\"default\"])(bendPoint);\n    endPoint[0] += labelLineEndLength * (left ? -1 : 1);\n    item.labelLine = [edgeCenterPos, bendPoint, endPoint];\n    item.labelLineLength = (0, _util2.getPolylineLength)(item.labelLine);\n    item.align = {\n      textAlign: 'left',\n      textBaseline: 'middle'\n    };\n    if (left) item.align.textAlign = 'right';\n  });\n}\n\nfunction getPieConfig(pieItem) {\n  var data = pieItem.data,\n      animationCurve = pieItem.animationCurve,\n      animationFrame = pieItem.animationFrame,\n      rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'pie',\n      index: rLevel,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getPieShape(pieItem, i),\n      style: getPieStyle(pieItem, i)\n    };\n  });\n}\n\nfunction getStartPieConfig(pieItem) {\n  var animationDelayGap = pieItem.animationDelayGap,\n      startAnimationCurve = pieItem.startAnimationCurve;\n  var configs = getPieConfig(pieItem);\n  configs.forEach(function (config, i) {\n    config.animationCurve = startAnimationCurve;\n    config.animationDelay = i * animationDelayGap;\n    config.shape.or = config.shape.ir;\n  });\n  return configs;\n}\n\nfunction beforeChangePie(graph) {\n  graph.animationDelay = 0;\n}\n\nfunction getPieShape(pieItem, i) {\n  var center = pieItem.center,\n      data = pieItem.data;\n  var dataItem = data[i];\n  var radius = dataItem.radius,\n      startAngle = dataItem.startAngle,\n      endAngle = dataItem.endAngle;\n  return {\n    startAngle: startAngle,\n    endAngle: endAngle,\n    ir: radius[0],\n    or: radius[1],\n    rx: center[0],\n    ry: center[1]\n  };\n}\n\nfunction getPieStyle(pieItem, i) {\n  var pieStyle = pieItem.pieStyle,\n      data = pieItem.data;\n  var dataItem = data[i];\n  var color = dataItem.color;\n  return (0, _util2.deepMerge)({\n    fill: color\n  }, pieStyle);\n}\n\nfunction getInsideLabelConfig(pieItem) {\n  var animationCurve = pieItem.animationCurve,\n      animationFrame = pieItem.animationFrame,\n      data = pieItem.data,\n      rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'text',\n      index: rLevel,\n      visible: pieItem.insideLabel.show,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getInsideLabelShape(pieItem, i),\n      style: getInsideLabelStyle(pieItem, i)\n    };\n  });\n}\n\nfunction getInsideLabelShape(pieItem, i) {\n  var insideLabel = pieItem.insideLabel,\n      data = pieItem.data;\n  var formatter = insideLabel.formatter;\n  var dataItem = data[i];\n  var formatterType = (0, _typeof2[\"default\"])(formatter);\n  var label = '';\n\n  if (formatterType === 'string') {\n    label = formatter.replace('{name}', dataItem.name);\n    label = label.replace('{percent}', dataItem.percentForLabel);\n    label = label.replace('{value}', dataItem.value);\n  }\n\n  if (formatterType === 'function') {\n    label = formatter(dataItem);\n  }\n\n  return {\n    content: label,\n    position: dataItem.insideLabelPos\n  };\n}\n\nfunction getInsideLabelStyle(pieItem, i) {\n  var style = pieItem.insideLabel.style;\n  return style;\n}\n\nfunction getOutsideLabelLineConfig(pieItem) {\n  var animationCurve = pieItem.animationCurve,\n      animationFrame = pieItem.animationFrame,\n      data = pieItem.data,\n      rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'polyline',\n      index: rLevel,\n      visible: pieItem.outsideLabel.show,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getOutsideLabelLineShape(pieItem, i),\n      style: getOutsideLabelLineStyle(pieItem, i)\n    };\n  });\n}\n\nfunction getStartOutsideLabelLineConfig(pieItem) {\n  var data = pieItem.data;\n  var configs = getOutsideLabelLineConfig(pieItem);\n  configs.forEach(function (config, i) {\n    config.style.lineDash = [0, data[i].labelLineLength];\n  });\n  return configs;\n}\n\nfunction getOutsideLabelLineShape(pieItem, i) {\n  var data = pieItem.data;\n  var dataItem = data[i];\n  return {\n    points: dataItem.labelLine\n  };\n}\n\nfunction getOutsideLabelLineStyle(pieItem, i) {\n  var outsideLabel = pieItem.outsideLabel,\n      data = pieItem.data;\n  var labelLineStyle = outsideLabel.labelLineStyle;\n  var color = data[i].color;\n  return (0, _util2.deepMerge)({\n    stroke: color,\n    lineDash: [data[i].labelLineLength, 0]\n  }, labelLineStyle);\n}\n\nfunction getOutsideLabelConfig(pieItem) {\n  var animationCurve = pieItem.animationCurve,\n      animationFrame = pieItem.animationFrame,\n      data = pieItem.data,\n      rLevel = pieItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'text',\n      index: rLevel,\n      visible: pieItem.outsideLabel.show,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getOutsideLabelShape(pieItem, i),\n      style: getOutsideLabelStyle(pieItem, i)\n    };\n  });\n}\n\nfunction getStartOutsideLabelConfig(pieItem) {\n  var data = pieItem.data;\n  var configs = getOutsideLabelConfig(pieItem);\n  configs.forEach(function (config, i) {\n    config.shape.position = data[i].labelLine[1];\n  });\n  return configs;\n}\n\nfunction getOutsideLabelShape(pieItem, i) {\n  var outsideLabel = pieItem.outsideLabel,\n      data = pieItem.data;\n  var formatter = outsideLabel.formatter;\n  var _data$i = data[i],\n      labelLine = _data$i.labelLine,\n      name = _data$i.name,\n      percentForLabel = _data$i.percentForLabel,\n      value = _data$i.value;\n  var formatterType = (0, _typeof2[\"default\"])(formatter);\n  var label = '';\n\n  if (formatterType === 'string') {\n    label = formatter.replace('{name}', name);\n    label = label.replace('{percent}', percentForLabel);\n    label = label.replace('{value}', value);\n  }\n\n  if (formatterType === 'function') {\n    label = formatter(data[i]);\n  }\n\n  return {\n    content: label,\n    position: labelLine[2]\n  };\n}\n\nfunction getOutsideLabelStyle(pieItem, i) {\n  var outsideLabel = pieItem.outsideLabel,\n      data = pieItem.data;\n  var _data$i2 = data[i],\n      color = _data$i2.color,\n      align = _data$i2.align;\n  var style = outsideLabel.style;\n  return (0, _util2.deepMerge)(_objectSpread({\n    fill: color\n  }, align), style);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}