<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Adv procedural building tool - 人车模拟器</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Adv procedural building tool";
        var mkdocs_page_input_path = "adv_procedural_building_tool.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 人车模拟器
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">首页</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">人车模拟器</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Adv procedural building tool</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/OpenHUTB/doc/edit/master/docs/adv_procedural_building_tool.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="admonition 笔记">
<p class="admonition-title">笔记</p>
<p><strong>程序化建筑工具</strong> 目前是一个 <strong>实验性功能</strong> ，现阶段尚未考虑 <em>投入生产</em>。因此它只能用于实验研究项目。</p>
</div>
<h1 id="_1"><a href="https://carla.readthedocs.io/en/latest/adv_procedural_building_tool/">程序化建筑工具</a></h1>
<p><strong>程序化建筑工具</strong> 有助于生成虚拟三维建筑，可以通过简单的界面对其尺寸和装饰风格进行调制，以创建近乎无限的变化。可以通过界面选择楼层的占地面积尺寸和高度。然后用户可以为建筑大堂、主体以及顶层或阁楼选择多种风格。可以从 Carla 资源库中为角窗和阳台等功能选择各种面板元素样式。</p>
<ul>
<li><a href="#opening-the-procedural-building-tool"><strong>打开程序化建筑工具</strong></a></li>
<li><a href="#base-parameters"><strong>基本参数</strong></a></li>
<li><a href="#mesh-parameters"><strong>网格参数</strong></a></li>
<li><a href="#mesh-elements"><strong>网格元素</strong></a><ul>
<li><a href="#sockets">套接字</a></li>
</ul>
</li>
<li><a href="#facade-materials"><strong>外墙材料</strong></a></li>
<li><a href="#cooking"><strong>烘焙</strong></a></li>
</ul>
<h2 id="_2">打开程序化建筑工具 <span id="opening-the-procedural-building-tool"></span></h2>
<p>首先，您需要向场景添加程序建筑参与者。导航到<code>Content&gt;Carla&gt;Blueprints&gt;LevelDesign</code>并拖动蓝图 <em>BP_ProceduralBuilding</em> 到地图中。将资产移动到您希望可视化建筑物的位置。选择一个有空间的地方，以便可以清楚地看到结果。然后，要打开该工具，请右键单击<em>WD_ProceduralBuilding（编辑器工具控件）</em>并从上下文菜单中选择<em>运行编辑器工具控件</em>(Run editor utility widget)来启动程序构建工具。这将打开该工具的界面。</p>
<p><img alt="open_pb_tool" src="../img/open_pb_tool.png" /></p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p>您必须在打开工具之前完成此步骤，地图中必须存在<em>BP_ProceduralBuilding</em>蓝图的实例，工具才能运行。您还必须确保在继续之前在世界大纲视图（<em>World outliner</em>）中选择<em>BP_ProceduralBuilding</em>实体。</p>
</div>
<h2 id="_3">基本参数 <span id="base-parameters"></span></h2>
<p><img alt="base_parameters" src="../img/pb_base_parameters.png" /></p>
<p>在基本参数部分中，您可以选择建筑物的基本属性，例如占地面积和楼层高度。</p>
<div class="admonition 笔记">
<p class="admonition-title">笔记</p>
<p>在网格参数部分（<a href="#mesh-parameters">mesh parameters</a>）选择网格片段之前，调整基本参数时，您不会在虚幻引擎视口中看到任何变化。</p>
</div>
<p>可用参数如下：</p>
<ul>
<li><strong>Seed</strong>: 设置程序生成的随机种子，这可以使建筑物具有相同设置的变化。</li>
<li><strong>Num floors</strong>: 设置建筑物的层数或楼层数，并从此定义建筑物的高度。</li>
<li><strong>Length X/Y</strong>: 定义建筑物在 X 和 Y 维度上的占地面积大小。这些是无单位的，数字表示重复部分的数量，每个部分是一列窗口。</li>
<li><strong>Create automatically</strong>: 如果选择此选项，建筑物将在视口中自动更新，以便您可以看到调整的效果。</li>
<li><strong>Corners</strong>: 允许将角件添加到建筑物中，您可以在<a href="#mesh-parameters">Mesh parameters</a>部分中选择这些件。</li>
<li><strong>Walls</strong>: 将建筑物左/右/前/后的中间部分替换为可使用网格参数（<a href="#mesh-parameters">Mesh parameters</a>）菜单选择的替代部分。</li>
<li><strong>Doors</strong>: 允许在大厅曾放置门的阵列。门放置在选定的索引位置。</li>
</ul>
<h2 id="_4">网格参数 <span id="mesh-parameters"></span></h2>
<p><img alt="mesh_parameters" src="../img/pb_mesh_parameters.png" /></p>
<p>在界面的“网格参数(Mesh Parameters)”选项卡中，我们选择将用于覆盖建筑物外部的网格件。建筑物不同部分的网片分为 5 类：</p>
<ul>
<li><strong>Lobby</strong>: 用于装饰建筑物大堂的网片。</li>
<li><strong>Midsection</strong>: 用于装饰建筑物中段、大堂和顶层之间的每一层的网状部件。</li>
<li><strong>Penthouse</strong>: 用于装饰顶层公寓层的网格件。</li>
<li><strong>Doors</strong>: 为大厅添加门的网状部件</li>
<li><strong>Walls</strong>: 用于装饰建筑物墙壁的网片</li>
</ul>
<p>在每个类别中，您都会发现许多网片选项。单击一个或多个使其变为红色，这些将被添加到建筑物的相应部分。如果您选择多个选项，该工具将在选项之间随机交替。当您为建筑物的每个部分选择网格片段时，如果您在基本参数部分中选择了自动创建（<em>Create automatically</em>），您将在编辑器视口中看到建筑物正在成形。</p>
<p><img alt="building_parts" src="../img/pb_building_parts.png" /></p>
<h2 id="_5">网格元素 <span id="mesh-elements"></span></h2>
<p><img alt="mesh_elements" src="../img/pb_mesh_elements.png" /></p>
<p>在此部分中，您可以选择建筑物的更详细元素，例如窗户、柱子、花盆、空调装置和天线。每种类型的装饰都有略微不同的属性。</p>
<p>建筑物细节的装饰有多种类型：</p>
<ul>
<li>
<p><strong>垂直/水平窗户网格</strong>: 这些网格片定义了建筑物中窗框的样式。垂直窗户网格将占据比其宽度高的窗户空间，而水平窗户网格将占据比其高度更宽的窗户空间。如果您选择多个选项，它们将交替出现。</p>
</li>
<li>
<p><strong>柱网格</strong>: 这些模拟跨越建筑物高度的砖砌柱细节</p>
</li>
<li>
<p><strong>顶部/底部窗户细节</strong>: 这些网格用门楣和遮阳板装饰窗户的顶部，用窗台和植物箱装饰窗户的底部。</p>
</li>
<li>
<p><strong>Window columns</strong>: 分隔窗户的砖砌柱</p>
</li>
<li>
<p><strong>Curtain meshes</strong>: 安装在窗户内的窗帘和百叶窗</p>
</li>
<li>
<p><strong>Pot meshes</strong>: 在指定插座点添加到窗台和植物箱的花盆</p>
</li>
<li>
<p><strong>Air conditioner meshes</strong>: 在指定插座点处添加到窗户的空调装置</p>
</li>
<li>
<p><strong>Pipe meshes</strong>: 垂直向下延伸到建筑物的管道，模拟屋顶的排水管</p>
</li>
<li>
<p><strong>Wire meshes</strong>: 沿着建筑物垂直延伸的电线，模拟电视天线延伸和闪电接地线</p>
</li>
<li>
<p><strong>Antenna meshes</strong>: 从窗户伸出的电视天线</p>
</li>
</ul>
<p><img alt="mesh_variations" src="../img/pb_detail_variations.webp" /></p>
<p>参数的工作原理如下：</p>
<p><strong>常用参数</strong>:</p>
<ul>
<li><strong>Percentage</strong>: 控制将放置在建筑物上的件数，100% 表示所有可用空间将被占用</li>
<li><strong>Offset</strong>: 该作品相对于建筑物主体的空间偏移</li>
</ul>
<p><strong>Blinds and curtains</strong>:</p>
<ul>
<li><strong>Min/Max size</strong>: 选择百叶窗或窗帘的最小/最大长度，值之间随机变化。1.0为全闭，0.0为全开。</li>
</ul>
<p><strong>Pipes and wires</strong>:</p>
<ul>
<li><strong>Index</strong>: 定义将放置管道的建筑物的面</li>
<li><strong>Offset side/front</strong>: 从建筑物正面的中心向作品添加空间偏移</li>
</ul>
<div class="admonition 笔记">
<p class="admonition-title">笔记</p>
<p>在某些情况下，您可能会发现，当您选择细节网格部件（例如花盆、天线和空调装置）时，您看不到建筑物有任何变化。这很可能是因为您正在使用的部件没有添加您选择的部件所需的适当套接字。请参阅插槽部分（<a href="#sockets">sockets section</a>）了解如何使用插槽。</p>
</div>
<h3 id="_6">套接字 <span id="sockets"></span></h3>
<p><img alt="socket_details" src="../img/pb_detail_section.png" /></p>
<p>插槽是锚点，用于定义将细节网格物体放置在另一个网格物体上的位置。要将套接字添加到程序建筑中的网格物体，请在选择程序建筑的情况下，转到详细信息面板（<em>details panel</em>），通常位于虚幻编辑器界面的右侧。在那里，您将找到“网格（<em>Meshes</em>）”和“细节网格（<em>Detail meshes</em>）”面板。打开相关部分，在您要放置插座的位置打开网片。</p>
<p><img alt="mesh_details" src="../img/pb_mesh_details.png" /></p>
<p>找到要在其上放置套接字的网格，然后双击该图标以在编辑器中将其打开。单击“创建套接字(<em>create socket</em>)”以添加套接字并使用以下约定命名：</p>
<ul>
<li>空调机组（Air conditioning unit）： aa_*</li>
<li>天线（Antennas）： ant_*</li>
<li>花盆（Plant pots）： pot_*</li>
</ul>
<p>将星号替换为索引，具体取决于您有多少个套接字，即 aa_0, aa_2, aa_3...</p>
<p><img alt="socket_details" src="../img/pb_add_socket.png" /></p>
<p>当您单击“创建套接字(<em>Create socket</em>)”时，套接字将在编辑器中使用三维句柄进行实例化。将插槽拖动到网格上的所需位置，这是您的细节部件将显示连接到单元的位置。</p>
<h2 id="_7">外墙材料 <span id="facade-materials"></span></h2>
<p><img alt="facade_materials" src="../img/pb_facade_materials.png" /></p>
<p>在外观材料选项卡中，您可以浏览和预览要装饰建筑物墙壁的材料。</p>
<p><img alt="facade_changes" src="../img/pb_facade_changes.webp" /></p>
<h2 id="_8">烘焙 <span id="cooking"></span></h2>
<p>在烹饪选项卡中，您可以将选择的所有网格物体和材质组合到具有关联材质和纹理的单个静态网格物体中。还将为 LOD 创建建筑物的 LOD 纹理。在界面中指定将保存新建筑资源的文件夹名称。</p>
<p>一旦您完成了建筑物的制作，您就可以像任何其他 Carla 资产一样将建筑物的实例放置在地图中。</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/OpenHUTB/doc" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="https://cdn.rawgit.com/knsv/mermaid/6.0.0/dist/mermaid.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script>
      <script src="../js/umlconvert.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
