<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>常问的问题 - 人车模拟器</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u5e38\u95ee\u7684\u95ee\u9898";
        var mkdocs_page_input_path = "build_faq.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 人车模拟器
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">首页</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">人车模拟器</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">常问的问题</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/OpenHUTB/carla_doc/edit/master/docs/build_faq.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="_1">常问的问题</h1>
<p>此处列出了有关 Carla 安装和构建的一些最常见问题。更多信息可以在该项目的 <a href="https://github.com/carla-simulator/carla/issues?utf8=%E2%9C%93&amp;q=label%3Aquestion+">GitHub issues</a> 找到。如果您没有发现此处列出的疑问，请查看论坛并随时提问。</p>
<div class="build-buttons">
<p>
<a href="https://github.com/carla-simulator/carla/discussions/" target="_blank" class="btn btn-neutral" title="跳转至 Carla 论坛">
Carla 论坛</a>
</p>
</div>

<hr />
<h2 id="_2">专业问题</h2>
<ul>
<li><a href="../faq/sensor/">传感器</a></li>
<li><a href="../faq/dynamics/">动力学</a></li>
</ul>
<h2 id="_3">系统要求</h2>
<ul>
<li><a href="#expected-disk-space-to-build-carla">构建 Carla 所需的磁盘空间。</a></li>
<li><a href="#recommended-hardware-to-run-carla">运行 Carla 的推荐硬件。</a></li>
</ul>
<hr />
<h2 id="linux">Linux 构建</h2>
<ul>
<li><a href="#carlaue4sh-script-does-not-appear-when-downloading-from-github">从 GitHub 下载时不会出现“CarlaUE4.sh”脚本。</a></li>
<li><a href="#make-launch-is-not-working-on-linux">“make launch” 在 Linux 上不起作用。</a></li>
<li><a href="#cloning-the-unreal-engine-repository-shows-an-error">克隆虚幻引擎存储库显示错误。</a></li>
<li><a href="#attributeerror-module-carla-has-no-attribute-client-when-running-a-script">AttributeError: module 'carla' has no attribute 'Client' when running a script.</a></li>
<li><a href="#cannot-run-example-scripts-or-runtimeerror-rpcrpc_error-during-call-in-function-version">无法运行示例脚本或 "RuntimeError: rpc::rpc_error during call in function version".</a></li>
</ul>
<hr />
<h2 id="windows">Windows 构建</h2>
<ul>
<li><a href="#carlaue4exe-does-not-appear-when-downloading-from-github">从 GitHub 下载时不会出现“CarlaUE4.exe”。</a></li>
<li><a href="#carlaue4-could-not-be-compiled-try-rebuilding-it-from-source-manually">CarlaUE4 无法编译。尝试从源手动重建它。</a></li>
<li><a href="#cmake-error-shows-even-though-cmake-is-properly-installed">即使 CMake 已正确安装，也会显示 CMake 错误。</a></li>
<li><a href="#error-c2440-c2672-compiler-version">Error C2440, C2672：编译器版本。</a></li>
<li><a href="#make-launch-is-not-working-on-windows">“make launch”在 Windows 上不起作用。</a></li>
<li><a href="#make-is-missing-libintl3dll-orand-libiconv2dll">Make 缺少 libintl3.dll 或/和 libiconv2.dll。</a></li>
<li><a href="#modules-are-missing-or-built-with-a-different-engine-version">模块缺失或使用不同的引擎版本构建。</a></li>
<li><a href="#there-is-no-dist-folder-in-pythonapicarla-despite-a-successful-output-message">在 <code>PythonAPI/carla</code> 中尽管成功输出消息，但没有<code>dist</code>文件夹</a></li>
<li><a href="#osm2odr_is_null">osm2odr-visualstudio为空，或者拷贝过去的目录不对</a></li>
<li><a href="#type_conversion_error">类型转换不对</a></li>
<li><a href="#link_osm2odr_failed">链接不到osm2odr.lib</a></li>
<li><a href="#heap_lack">编译器的堆空间不足</a></li>
</ul>
<hr />
<h2 id="openhutb">编译 OpenHUTB 分支</h2>
<h3 id="make-lanunch-args-chrono">make lanunch ARGS="--chrono"报错</h3>
<div class="highlight"><pre><span></span><code>D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(219): error C2653: “CubemapHelpersFisheye”: 不是类或命名空间名称
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(279): note: 查看对正在编译的函数 模板 实例化“void AFisheyeSensor::SendPixelsInRenderThread&lt;AFisheyeSensor&gt;(TSensor &amp;,float,float,float,float,float,float,float,float,float,float,float)”的引用
      with
      [
          TSensor=AFisheyeSensor
      ]
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(219): error C2065: “FFisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(219): error C2146: 语法错误: 缺少“;”(在标识符“FisheyeParams”的前面)
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(219): error C2065: “FisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(221): error C2065: “FisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(223): error C2065: “FisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(225): error C2065: “FisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(227): error C2065: “FisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(229): error C2653: “CubemapHelpersFisheye”: 不是类或命名空间名称
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(229): error C2065: “FisheyeParams”: 未声明的标识符
D:/work/workspace/carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/FisheyeSensor.cpp(229): error C3861: “GenerateLongLatUnwrapFisheye”: 找不到标识符
</code></pre></div>
<blockquote>
<p>因为鱼眼相机需要修改虚幻引擎中的代码，需要同步更新 <a href="https://github.com/OpenHUTB/UnrealEngine">UnrealEngine</a> 分支中的代码。</p>
</blockquote>
<hr />
<h2 id="carla">运行 Carla</h2>
<ul>
<li><a href="#load_libraries">运行Carla_0.9.12.sh时候报错：error while loading shared libraries: libomp.so.5</a></li>
<li><a href="#low-fps-rate-when-running-the-server-in-unreal-editor">在虚幻编辑器中运行服务器时 FPS 速率较低。</a></li>
<li><a href="#cant-run-a-script">无法运行脚本。</a></li>
<li><a href="#connect-to-the-simulator-while-running-within-unreal-editor">当在虚幻编辑器中运行时链接到模拟器。</a></li>
<li><a href="#cant-run-carla-neither-binary-nor-source-build">无法运行 Carla，无论是二进制还是源代码构建。</a></li>
<li><a href="#importerror-dll-load-failed-the-specified-module-could-not-be-found">ImportError: DLL load failed: The specified module could not be found.</a></li>
<li><a href="#importerror-dll-load-failed-while-importing-libcarla-1-is-not-a-valid-win32-app">ImportError: DLL load failed while importing libcarla: %1 is not a valid Win32 app.</a></li>
<li><a href="#importerror-no-module-named-carla">ImportError: No module named 'carla'</a></li>
<li><a href="#rpc_error">RuntimeError: rpc::rpc_error during call in function apply_batch</a></li>
<li><a href="#value_error">ValueError: sticky_control: invalid value type</a></li>
</ul>
<hr />
<h2 id="_4">其他</h2>
<ul>
<li><a href="#fatal-error-versionh-has-been-modified-since-the-precompiled-header">Fatal error: 'version.h' has been modified since the precompiled header.</a></li>
<li><a href="#create-a-binary-version-of-carla">创建 Carla 的二进制版本。</a></li>
<li><a href="#can-i-package-carla-for-windows-on-a-linux-machine-and-vice-versa">我可以在 Linux 计算机上打包适用于 Windows 的 Carla，反之亦然吗？</a></li>
<li><a href="#how-do-i-uninstall-the-carla-client-library">如何卸载 Carla 客户端库？</a></li>
</ul>
<hr />
<!-- ======================================================================= -->
<h2 id="_5">系统要求</h2>
<!-- ======================================================================= -->

<h6 id="carla_1">构建 Carla 所需的磁盘空间。 <span id="expected-disk-space-to-build-carla"></span></h6>
<blockquote>
<p>建议至少有 170GB 可用空间。构建 Carla 需要大约 35GB 的磁盘空间，加上虚幻引擎大约需要 95-135GB。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="carla_2">运行 Carla 的推荐硬件。 <span id="recommended-hardware-to-run-carla"></span></h6>
<blockquote>
<p>Carla 是一款性能要求较高的软件。它至少需要 6GB GPU，或者更好的是能够运行虚幻引擎的专用 GPU。</p>
<p>看看 <a href="https://www.ue4community.wiki/recommended-hardware-x1p9qyg0">虚幻引擎推荐的硬件</a> 。</p>
</blockquote>
<hr />
<h2 id="linux_1">Linux 构建</h2>
<!-- ======================================================================= -->
<h6 id="github-carlaue4sh">从 GitHub 下载时不会出现“CarlaUE4.sh”脚本。 <span id="carlaue4sh-script-does-not-appear-when-downloading-from-github"></span></h6>
<blockquote>
<p>Carla 的源版本中没有 <code>CarlaUE4.sh</code> 脚本。按照 <a href="../build_linux/">构建说明</a> 从源代码构建 Carla。</p>
<p>要使用 <code>CarlaUE4.sh</code> 运行 Carla，请按照 <a href="../start_quickstart/">快速启动安装</a> 进行操作。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="make-launch-linux">“make launch”在 Linux 上不起作用。 <span id="make-launch-is-not-working-on-linux"></span></h6>
<blockquote>
<p>在构建安装过程中可能会拖出许多不同的问题，并会像这样显现出来。以下是最可能的原因列表：</p>
<ul>
<li><strong>运行虚幻引擎 4.26。</strong> 构建虚幻引擎时可能出现某些问题。尝试单独运行虚幻编辑器并检查它是否是 4.26 版本。</li>
<li><strong>下载资产。</strong> 如果没有视觉内容，服务器将无法运行。此步骤是强制性的。</li>
<li><strong>UE4_ROOT 未定义。</strong> 境变量未设置。请记住通过将其添加到 <code>~/.bashrc</code> 或 <code>~/.profile</code> 来使其在会话范围内持久存在。否则，需要为每个新 shell 进行设置。运行<code>export UE4_ROOT=&lt;path_to_unreal_4-26&gt;</code>设置这次的变量。</li>
<li><strong>检查依赖。</strong> 确保一切都安装正确。也许其中一个命令被跳过、不成功或者依赖项不适合系统。</li>
<li><strong>删除 Carla 并再次克隆它。</strong> 以防万一出了问题。删除 Carla 并重新克隆或下载。</li>
<li><strong>满足系统要求。</strong> Ubuntu 版本应为 16.04 或更高版本。Carla 需要大约 170GB 的磁盘空间和一个专用 GPU（或至少一个 6GB）才能运行。</li>
</ul>
<p>系统显示与 Carla 冲突的其他特定原因可能会发生。请将这些内容发布到 <a href="https://github.com/carla-simulator/carla/discussions/">论坛</a> 上，以便团队可以更多地了解它们。 </p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="_6">克隆虚幻引擎存储库显示错误。 <span id="cloning-the-unreal-engine-repository-shows-an-error"></span></h6>
<blockquote>
<p><strong>1. 虚幻引擎帐号是否已激活？</strong> 虚幻引擎存储库是私有的。为了克隆它，请创建虚 <a href="https://www.unrealengine.com/en-US/">幻引擎帐</a> 户，激活它（检查验证邮件），然后 <a href="https://www.unrealengine.com/en-US/blog/updated-authentication-process-for-connecting-epic-github-accounts">链接您的 GitHub</a>  帐户。</p>
<p><strong>2. git是否安装正确？</strong> 有时错误表明与 <code>https</code> 协议不兼容。通过卸载并重新安装 git 即可轻松解决。打开终端并运行以下命令：</p>
<pre><code> sudo apt-get remove git # 卸载 git
 sudo apt install git-all # 安装 git
</code></pre>
</blockquote>
<!-- ======================================================================= -->

<h6 id="attributeerror-module-carla-has-no-attribute-client-when-running-a-script">AttributeError: module 'carla' has no attribute 'Client' when running a script. <span id="attributeerror-module-carla-has-no-attribute-client-when-running-a-script"></span></h6>
<blockquote>
<p>运行以下命令。</p>
<pre><code>  pip3 install -Iv setuptools==47.3.1
</code></pre>
<p>并再次构建 PythonAPI。</p>
<pre><code> make PythonAPI
</code></pre>
<p>尝试构建文档来测试一切是否正常运行。应该会显示成功的消息。</p>
<pre><code> make PythonAPI.docs
</code></pre>
</blockquote>
<!-- ======================================================================= -->

<h6 id="runtimeerror-rpcrpc_error-during-call-in-function-version">无法运行示例脚本或 "RuntimeError: rpc::rpc_error during call in function version". <span id="cannot-run-example-scripts-or-runtimeerror-rpcrpc_error-during-call-in-function-version"></span></h6>
<blockquote>
<p><img alt="faq_rpc_error" src="../img/faq_rpc_error.jpg" /></p>
<p>如果运行脚本返回与此类似的输出，则说明 PythonAPI 中的 <code>.egg</code> 文件存在问题。</p>
</blockquote>
<div class="admonition 重要">
<p class="admonition-title">重要</p>
<p>如果您使用的是 0.9.12+，有多种方法可以使用/安装客户端库。如果您使用客户端库（<code>.whl</code> 或 PyPi 下载）的较新方法之一，本节中的信息将与您无关。</p>
</div>
<blockquote>
<p>首先，打开<code>&lt;root_carla&gt;/PythonAPI/carla/dist</code>。 应该有一个和你正在使用相对应的 Carla 和 Python 响应的 <code>.egg</code> 文件（类似于 <code>carla-0.X.X-pyX.X-linux-x86_64.egg</code>）。确保该文件与您正在使用的 Python 版本匹配。要检查您的 Python 版本，请使用以下命令。 </p>
<pre><code>  python3 --version
  # 或者对于 Python 2
  python --version
</code></pre>
<p>如果文件丢失或者您认为它可能已损坏，请尝试再次重建。</p>
<pre><code> make clean
 make PythonAPI
 make launch
</code></pre>
<p>现在再次尝试示例脚本之一。 </p>
<pre><code> cd PythonAPI/examples
 python3 dynamic_weather.py
</code></pre>
<p>如果错误仍然存在，则问题可能与您的 PythonPATH 有关。这些脚本会自动查找<code>.egg</code> 与构建相关的文件，因此，您的 PythonPATH 中可能存在另一个<code>.egg</code> 文件干扰该过程。使用以下命令显示 PythonPATH 的内容。</p>
<pre><code> echo $PYTHONPATH
</code></pre>
<p>在类似于<code>PythonAPI/carla/dist</code>的路径下查找另一个<code>.egg</code>文件，并删除它们。它们可能属于 Carla 安装的其他实例。例如，如果您还通过 <em>apt-get</em> 安装了 Carla ，则可以使用以下命令将其删除，并且 PythonPATH 也会被清理。</p>
<pre><code> sudo apt-get purge carla-simulator
</code></pre>
<p>最终可以选择使用<code>~/.bashrc</code>，将PythonPATH下你构建的<code>.egg</code>文件添加进来。这不是推荐的方式。最好有一个明确的 PythonPATH，只需在脚本中添加必要的<code>.egg</code>文件路径即可。</p>
<p>首先，打开 <code>~/.bashrc</code>.</p>
<pre><code> gedit ~/.bashrc
</code></pre>
<p>将以下行添加到 <code>~/.bashrc</code>。它们存储构建的<code>.egg</code>文件路径，以便Python可以自动找到它。保存文件，然后重置终端以使更改生效。</p>
<div class="highlight"><pre><span></span><code>export PYTHONPATH=$PYTHONPATH:&quot;${CARLA_ROOT}/PythonAPI/carla/dist/$(ls ${CARLA_ROOT}/PythonAPI/carla/dist | grep py3.)&quot;
export PYTHONPATH=$PYTHONPATH:${CARLA_ROOT}/PythonAPI/carla
</code></pre></div>
<p>清理 PythonPATH 或添加构建的 <code>.egg</code>文件路径后，所有示例脚本都应该正常工作。</p>
</blockquote>
<hr />
<h2 id="windows_1">Windows 构建</h2>
<!-- ======================================================================= -->

<h6 id="github-carlaue4exe">从 GitHub 下载时不会出现“CarlaUE4.exe”。 <span id="carlaue4exe-does-not-appear-when-downloading-from-github"></span></h6>
<blockquote>
<p>Carla 的源版本中没有<code>CarlaUE4.exe</code>可执行文件。按照构建说明从源代码构建 Carla。要直接获取<code>CarlaUE4.exe</code>，请按照 <a href="../start_quickstart/">快速入门</a> 说明进行操作。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="carlaue4-could-not-be-compiled-try-rebuilding-it-from-source-manually">CarlaUE4 could not be compiled. Try rebuilding it from source manually. <span id="carlaue4-could-not-be-compiled-try-rebuilding-it-from-source-manually"></span></h6>
<blockquote>
<p>尝试构建 Carla 时出现问题。使用 Visual Studio 重新构建以发现发生了什么。</p>
<p><strong>1.</strong> 转到 <code>carla/Unreal/CarlaUE4</code> 并右键单击 <code>CarlaUE4.uproject</code>。</p>
<p><strong>2.</strong> 单击 <strong>Generate Visual Studio project files</strong>。<br />
<strong>3.</strong> 使用 Visual Studio 2019 打开生成的文件。</p>
<p><strong>4.</strong> 使用 Visual Studio 编译项目。快捷键是F7。构建将失败，但发现的问题将显示在下面。</p>
<p>不同的问题可能会导致出现此特定错误消息。用户<a href="https://github.com/tamakoji">@tamakoji</a> 解决了一个经常出现的情况，即源代码未正确克隆且无法设置 Carla 版本（从 git 将其下载为 .zip 时）。</p>
<ul>
<li><strong>检查 <code>Build/CMakeLists.txt.in</code>.</strong> 如果显示： <code>set(CARLA_VERSION )</code>，请执行以下操作： </li>
</ul>
<p><strong>1.</strong> 转到 <code>Setup.bat</code> 第 198 行。 </p>
<p><strong>2.</strong> Update the line from: </p>
<div class="highlight"><pre><span></span><code>for /f %%i in (&#39;git describe --tags --dirty --always&#39;) do set carla_version=%%i
</code></pre></div>
<p>为：</p>
<div class="highlight"><pre><span></span><code>for /f %%i in (&#39;git describe --tags --dirty --always&#39;) do set carla_version=&quot;0.9.9&quot;
</code></pre></div>
</blockquote>
<!-- ======================================================================= -->

<h6 id="cmake-cmake">即使 CMake 已正确安装，也会显示 CMake 错误。 <span id="cmake-error-shows-even-though-cmake-is-properly-installed"></span></h6>
<blockquote>
<p>当尝试使用  <em>make</em> 命令构建服务器或客户端时会出现此问题。即使 CMake 已安装、更新并添加到环境路径中。Visual Studio 版本之间可能存在冲突。</p>
<p>只留下VS2019，其余的彻底删除。 </p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="error-c2440-c2672-compiler-version">Error C2440, C2672: compiler version. <span id="error-c2440-c2672-compiler-version"></span></h6>
<blockquote>
<p>由于与其他 Visual Studio 或 Microsoft 编译器版本冲突，该构建未使用 2019 编译器。卸载这些并再次重建。  </p>
<p>Visual Studio 不擅长摆脱自身。要从计算机中彻底清除 Visual Studio，请转到 <code>Program Files (x86)\Microsoft Visual Studio\Installer\resources\app\layout</code> 并运行 <code>.\InstallCleanup.exe -full</code>。这可能需要管理员权限。  </p>
<p>要保留其他 Visual Studio 版本，请通过添加以下行进行编辑 <code>%appdata%\Unreal Engine\UnrealBuildTool\BuildConfiguration.xml</code> ： </p>
<div class="highlight"><pre><span></span><code> &lt;VCProjectFileGenerator&gt;
   &lt;Version&gt;VisualStudio2019&lt;/Version&gt;
&lt;/VCProjectFileGenerator&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code> &lt;WindowsPlatform&gt;
   &lt;Compiler&gt;VisualStudio2019&lt;/Compiler&gt;
&lt;/WindowsPlatform&gt;
</code></pre></div>
</blockquote>
<!-- ======================================================================= -->

<h6 id="make-launch-windows">“make launch”在 Windows 上不起作用。 <span id="make-launch-is-not-working-on-windows"></span></h6>
<blockquote>
<p>在构建安装过程中可能会拖出许多不同的问题，并像这样显现出来。以下是最可能的原因列表：</p>
<ul>
<li><strong>重新启动计算机。</strong> Windows 构建期间发生了很多事情。重新启动并确保所有内容均已正确更新。</li>
<li><strong>运行虚幻引擎 4.26。</strong> 构建虚幻引擎时可能出现某些问题。运行编辑器并检查是否使用了 4.26 版本。 </li>
<li><strong>下载资产。</strong> 如果没有视觉内容，服务器将无法运行。此步骤是强制性的。</li>
<li><strong>Visual Studio 2019.</strong> 如果安装或最近卸载了其他版本的 Visual Studio，可能会出现冲突。要从计算机中彻底清除 Visual Studio，请转到 <code>Program Files (x86)\Microsoft Visual Studio\Installer\resources\app\layout</code> 并运行 <code>.\InstallCleanup.exe -full</code>。  </li>
<li><strong>删除 Carla 并再次克隆它。</strong> 以防万一出了问题。删除 Carla 并重新克隆或下载。</li>
<li><strong>满足系统要求。</strong> Carla 需要大约 170GB 的磁盘空间和一个专用 GPU（或至少一个 6GB）才能运行。</li>
</ul>
<p>系统显示与 Carla 冲突的其他特定原因可能会发生。请将这些内容发布到 <a href="https://github.com/carla-simulator/carla/discussions/">论坛</a> 上，以便团队可以更多地了解它们。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="make-libintl3dll-libiconv2dll">Make 缺少 libintl3.dll 或/和 libiconv2.dll。 <span id="make-is-missing-libintl3dll-orand-libiconv2dll"></span></h6>
<blockquote>
<p>下载 <a href="http://gnuwin32.sourceforge.net/downlinks/make-dep-zip.php">依赖项</a> 并将<code>bin</code>内容解压到<code>make</code>安装路径中。 </p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="modules-are-missing-or-built-with-a-different-engine-version">Modules are missing or built with a different engine version. <span id="modules-are-missing-or-built-with-a-different-engine-version"></span></h6>
<blockquote>
<p>单击 on <strong>Accept</strong> 以重建它们。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="pythonapicarladist">尽管成功输出消息，但在<code>PythonAPI/carla</code>中没有<code>dist</code>文件夹。  <span id="there-is-no-dist-folder-in-pythonapicarla-despite-a-successful-output-message"></span></h6>
<blockquote>
<p>在 Windows 中， <code>make PythonAPI</code> 命令可能会返回一条消息，表明 Python API 安装成功，但实际上并未成功。如果看到此输出后目录 <code>PythonAPI/carla</code> 中没有 <code>dist</code> 文件夹，请查看上面的命令输出。很可能发生了错误，需要在更正错误并运行 <code>make clean</code> 后重试构建。 </p>
</blockquote>
<h6 id="osm2odr-visualstudio">osm2odr-visualstudio为空，或者拷贝过去的目录不对 <span id="osm2odr_is_null"></span></h6>
<p><div class="highlight"><pre><span></span><code>CMake Error: The current CMakeCache.txt directory D:/work/workspace/carla/Build/osm2odr-visualstudio/CMakeCache.txt is different than the directory d:/work/buffer/carla/Build/osm2odr-visualstudio where CMakeCache.txt was created. This may result in binaries being created in the wrong place. If you are not sure, reedit the CMakeCache.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code>CMake<span class="w"> </span>Error:<span class="w"> </span>The<span class="w"> </span><span class="nb">source</span><span class="w"> </span>directory<span class="w"> </span><span class="s2">&quot;D:/work/workspace/carla/Build/osm2odr-visualstudio/x64&quot;</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>appear<span class="w"> </span>to<span class="w"> </span>contain<span class="w"> </span>CMakeLists.txt.
</code></pre></div></p>
<blockquote>
<p>删除<code>carla\Build\osm2odr-visualstudio\CMakeCache.txt</code></p>
</blockquote>
<h6 id="_7">类型转换不对 <span id="type_conversion_error"></span></h6>
<blockquote>
<div class="highlight"><pre><span></span><code>carla/Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Vehicle/CustomTerrainPhysicsComponent.cpp<span class="o">(</span><span class="m">1161</span><span class="o">)</span>:<span class="w"> </span>error<span class="w"> </span>C2440:<span class="w"> </span>“static_cast”:<span class="w"> </span>无法从“float”转换为“EDefResolutionType”
</code></pre></div>
<p>注释掉
<div class="highlight"><pre><span></span><code>//<span class="w"> </span><span class="nv">ChosenRes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>static_cast&lt;EDefResolutionType&gt;<span class="o">(</span>Value<span class="o">)</span><span class="p">;</span><span class="w">  </span>//<span class="w"> </span>static_cast&lt;EDefResolutionType&gt;<span class="o">(</span>Value<span class="o">)</span>
</code></pre></div>
注意：注意vs2019专业版才有这个问题，vs2019社区版没有这个问题。</p>
</blockquote>
<h6 id="osm2odrlib">链接不到osm2odr.lib <span id="link_osm2odr_failed"></span></h6>
<blockquote>
<p><code>fatal error LNK1181: carla\Unreal\CarlaUE4\Plugins\Carla\CarlaDependencies\lib\osm2odr.lib</code></p>
<p>从其他地方拷贝过来。</p>
</blockquote>
<h6 id="_8">编译器的堆空间不足 <span id="heap_lack"></span></h6>
<blockquote>
<p>编译虚幻引擎4时，出现<code>C1060</code> 编译器的堆空间不足，说明机器的内存不够，可以参考<a href="https://ue5wiki.com/wiki/32770/">链接</a> 限制所使用的核心数（默认是使用所有核心数）。
修改<code>Engine/Saved/UnrealBuildTool/BuildConfiguration.xml</code>中的<code>MaxProcessorCount</code>：
<div class="highlight"><pre><span></span><code>&lt;?xml<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span><span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="w"> </span>?&gt;
&lt;Configuration<span class="w"> </span><span class="nv">xmlns</span><span class="o">=</span><span class="s2">&quot;https://www.unrealengine.com/BuildConfiguration&quot;</span>&gt;
<span class="w">  </span>&lt;ParallelExecutor&gt;
<span class="w">    </span>&lt;ProcessorCountMultiplier&gt;7&lt;/ProcessorCountMultiplier&gt;
<span class="w">    </span>&lt;MaxProcessorCount&gt;7&lt;/MaxProcessorCount&gt;
<span class="w">    </span>&lt;bStopCompilationAfterErrors&gt;true&lt;/bStopCompilationAfterErrors&gt;
<span class="w">  </span>&lt;/ParallelExecutor&gt;
&lt;/Configuration&gt;
</code></pre></div></p>
</blockquote>
<h6 id="_9">编译报错</h6>
<div class="highlight"><pre><span></span><code>C:\workspace\carla\Unreal\CarlaUE4\Plugins\Carla\CarlaDependencies\include\carla/streaming/detail/tcp/ServerSession.h(70): error C2338: static_assert failed: &#39;This function only accepts arguments of type BufferView.&#39;
</code></pre></div>
<blockquote>
<p>拷贝过来的依赖没有更新</p>
</blockquote>
<ul>
<li>执行<code>make PythonAPI</code>后没有<code>PythonAPI/carla/dist/</code>目录</li>
</ul>
<blockquote>
<p>报错信息在前面：<code>CMake Error: Could not create named generator</code>
可能没真正执行命令：<code>python setup.py bdist_egg bdist_wheel</code>，需要切换到Python虚拟环境，然后进入<code>PythonAPI/carla</code>目录中执行该命令。</p>
</blockquote>
<hr />
<h2 id="_10">打包</h2>
<h3 id="make-package">make package 时报错</h3>
<p>出错信息：
<div class="highlight"><pre><span></span><code>LogWindows:<span class="w"> </span>Error:<span class="w"> </span>begin:<span class="w"> </span>stack<span class="w"> </span><span class="k">for</span><span class="w"> </span>UAT
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">===</span><span class="w"> </span>Critical<span class="w"> </span>error:<span class="w"> </span><span class="o">===</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span>Fatal<span class="w"> </span>error!
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span>Unhandled<span class="w"> </span>Exception:<span class="w"> </span>EXCEPTION_ACCESS_VIOLATION<span class="w"> </span>reading<span class="w"> </span>address<span class="w"> </span>0x0000000000000038
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffdfaf366c4<span class="w"> </span>UE4Editor-RenderCore.dll!FShaderMapContent::GetOutdatedTypes<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\R</span>enderCore<span class="se">\P</span>rivate<span class="se">\S</span>haderMap.cpp:581<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd2b4fb28a<span class="w"> </span>UE4Editor-Engine.dll!FMaterialShaderMap::GetAllOutdatedTypes<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\E</span>ngine<span class="se">\P</span>rivate<span class="se">\M</span>aterials<span class="se">\M</span>aterialShader.cpp:1043<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd2b983b67<span class="w"> </span>UE4Editor-Engine.dll!GetOutdatedShaderTypes<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\E</span>ngine<span class="se">\P</span>rivate<span class="se">\S</span>haderCompiler<span class="se">\S</span>haderCompiler.cpp:4216<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd2b9a3d03<span class="w"> </span>UE4Editor-Engine.dll!RecompileShadersForRemote<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\E</span>ngine<span class="se">\P</span>rivate<span class="se">\S</span>haderCompiler<span class="se">\S</span>haderCompiler.cpp:5129<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd93651c5d<span class="w"> </span>UE4Editor-UnrealEd.dll!UCookOnTheFlyServer::SaveGlobalShaderMapFiles<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\E</span>ditor<span class="se">\U</span>nrealEd<span class="se">\P</span>rivate<span class="se">\C</span>ookOnTheFlyServer.cpp:5511<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd936559dc<span class="w"> </span>UE4Editor-UnrealEd.dll!UCookOnTheFlyServer::StartCookByTheBook<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\E</span>ditor<span class="se">\U</span>nrealEd<span class="se">\P</span>rivate<span class="se">\C</span>ookOnTheFlyServer.cpp:6865<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd934943b9<span class="w"> </span>UE4Editor-UnrealEd.dll!UCookCommandlet::CookByTheBook<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\E</span>ditor<span class="se">\U</span>nrealEd<span class="se">\P</span>rivate<span class="se">\C</span>ommandlets<span class="se">\C</span>ookCommandlet.cpp:919<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffd934be428<span class="w"> </span>UE4Editor-UnrealEd.dll!UCookCommandlet::Main<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\E</span>ditor<span class="se">\U</span>nrealEd<span class="se">\P</span>rivate<span class="se">\C</span>ommandlets<span class="se">\C</span>ookCommandlet.cpp:624<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ff7177896da<span class="w"> </span>UE4Editor-Cmd.exe!FEngineLoop::PreInitPostStartupScreen<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\L</span>aunch<span class="se">\P</span>rivate<span class="se">\L</span>aunchEngineLoop.cpp:3369<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ff717780e6d<span class="w"> </span>UE4Editor-Cmd.exe!GuardedMain<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\L</span>aunch<span class="se">\P</span>rivate<span class="se">\L</span>aunch.cpp:127<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ff7177811ca<span class="w"> </span>UE4Editor-Cmd.exe!GuardedMainWrapper<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\L</span>aunch<span class="se">\P</span>rivate<span class="se">\W</span>indows<span class="se">\L</span>aunchWindows.cpp:137<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ff717794e5d<span class="w"> </span>UE4Editor-Cmd.exe!WinMain<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\R</span>untime<span class="se">\L</span>aunch<span class="se">\P</span>rivate<span class="se">\W</span>indows<span class="se">\L</span>aunchWindows.cpp:268<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ff717796f02<span class="w"> </span>UE4Editor-Cmd.exe!__scrt_common_main_seh<span class="o">()</span><span class="w"> </span><span class="o">[</span>D:<span class="se">\a\_</span>work<span class="se">\1\s\s</span>rc<span class="se">\v</span>ctools<span class="se">\c</span>rt<span class="se">\v</span>cstartup<span class="se">\s</span>rc<span class="se">\s</span>tartup<span class="se">\e</span>xe_common.inl:288<span class="o">]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffe53647374<span class="w"> </span>KERNEL32.DLL!UnknownFunction<span class="w"> </span><span class="o">[]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span><span class="o">[</span>Callstack<span class="o">]</span><span class="w"> </span>0x00007ffe5417cc91<span class="w"> </span>ntdll.dll!UnknownFunction<span class="w"> </span><span class="o">[]</span>
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:
<span class="w">  </span>LogWindows:<span class="w"> </span>Error:<span class="w"> </span>end:<span class="w"> </span>stack<span class="w"> </span><span class="k">for</span><span class="w"> </span>UAT
Took<span class="w"> </span><span class="m">232</span>.8404432s<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>UE4Editor-Cmd.exe,<span class="w"> </span><span class="nv">ExitCode</span><span class="o">=</span><span class="m">3</span>
ERROR:<span class="w"> </span>Cook<span class="w"> </span>failed.
<span class="w">       </span><span class="o">(</span>see<span class="w"> </span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\P</span>rograms<span class="se">\A</span>utomationTool<span class="se">\S</span>aved<span class="se">\L</span>ogs<span class="se">\L</span>og.txt<span class="w"> </span><span class="k">for</span><span class="w"> </span>full<span class="w"> </span>exception<span class="w"> </span>trace<span class="o">)</span>
AutomationTool<span class="w"> </span>exiting<span class="w"> </span>with<span class="w"> </span><span class="nv">ExitCode</span><span class="o">=</span><span class="m">25</span><span class="w"> </span><span class="o">(</span>Error_UnknownCookFailure<span class="o">)</span>
卸载<span class="w"> </span>Appdomain<span class="w"> </span>时出错。<span class="w"> </span><span class="o">(</span>异常来自<span class="w"> </span>HRESULT:0x80131015<span class="o">)</span>
<span class="w">   </span>在<span class="w"> </span>System.AppDomain.Unload<span class="o">(</span>AppDomain<span class="w"> </span>domain<span class="o">)</span>
<span class="w">   </span>在<span class="w"> </span>AutomationToolLauncher.Launcher.RunInAppDomain<span class="o">(</span>String<span class="o">[]</span><span class="w"> </span>Arguments<span class="o">)</span><span class="w"> </span>位置<span class="w"> </span>D:<span class="se">\w</span>ork<span class="se">\w</span>orkspace<span class="se">\U</span>nrealEngine<span class="se">\E</span>ngine<span class="se">\S</span>ource<span class="se">\P</span>rograms<span class="se">\A</span>utomationToolLauncher<span class="se">\L</span>auncher.cs:行号<span class="w"> </span><span class="m">42</span>
BUILD<span class="w"> </span>FAILED

-<span class="o">[</span>Package<span class="o">]</span>:<span class="w"> </span><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>There<span class="w"> </span>was<span class="w"> </span>a<span class="w"> </span>problem<span class="w"> </span><span class="k">while</span><span class="w"> </span>packaging<span class="w"> </span>Unreal<span class="w"> </span>project.
<span class="w">          </span><span class="o">[</span>ERROR<span class="o">]</span><span class="w"> </span>Please<span class="w"> </span><span class="nb">read</span><span class="w"> </span>the<span class="w"> </span>screen<span class="w"> </span>log<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information.
make:<span class="w"> </span>***<span class="w"> </span><span class="o">[</span>package<span class="o">]</span><span class="w"> </span>错误<span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<blockquote>
<p><a href="../build/make_package/">打包分析过程</a></p>
</blockquote>
<hr />
<h2 id="carla_3">运行 Carla</h2>
<!-- ======================================================================= -->

<h6 id="carla_0912sherror-while-loading-shared-libraries-libompso5">运行Carla_0.9.12.sh时候报错：error while loading shared libraries: libomp.so.5。 <span id="load_libraries"></span></h6>
<blockquote>
<p>sudo apt-get install libomp5</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="fps">在虚幻编辑器中运行服务器时 FPS 速率较低。 <span id="low-fps-rate-when-running-the-server-in-unreal-editor"></span></h6>
<blockquote>
<p>虚幻4编辑器在失焦时会进入低性能模式。  </p>
<p>转到“编辑-&gt;编辑器偏好设置-&gt;性能” （<code>Edit/Editor Preferences/Performance</code>），然后禁用“处于背景中时占用较少 CPU”选项。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="_11">无法运行脚本。 <span id="cant-run-a-script"></span></h6>
<blockquote>
<p>有些脚本有要求。这些列在名为 <strong>Requirements.txt</strong> 的文件中，与脚本本身位于同一路径中。请务必检查这些以便运行脚本。其中大多数可以通过简单的<code>pip</code>命令进行安装。</p>
<p>有时在 Windows 上，脚本无法仅使用 <code>&gt; script_name.py</code> 运行。尝试添加. Try adding <code>&gt; python3 script_name.py</code>，并确保位于正确的目录中。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="_12">在虚幻编辑器中运行时连接到模拟器。 <span id="connect-to-the-simulator-while-running-within-unreal-editor"></span></h6>
<blockquote>
<p>单击“运行”（ <strong>Play</strong> ）并等待场景加载。此时，Python 客户端可以像独立模拟器一样连接到模拟器。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="carla_4">无法运行 Carla，无论是二进制还是源代码构建。 <span id="cant-run-carla-neither-binary-nor-source-build"></span></h6>
<blockquote>
<p>NVIDIA 驱动程序可能已过时。确保情况并非如此。如果问题仍未解决，请查看 <a href="https://github.com/carla-simulator/carla/discussions/">论坛</a> 并发布具体问题。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="importerror-dll-load-failed-the-specified-module-could-not-be-found">ImportError: DLL load failed: The specified module could not be found. <span id="importerror-dll-load-failed-the-specified-module-could-not-be-found"></span></h6>
<blockquote>
<p>所需的库之一尚未正确安装。作为解决方法，请转至 <code>carla\Build\zlib-source\build</code>并在脚本的路径中复制名为 <code>zlib.dll</code> 的文件。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="importerror-dll-load-failed-while-importing-libcarla-1-is-not-a-valid-win32-app">ImportError: DLL load failed while importing libcarla: %1 is not a valid Win32 app. <span id="importerror-dll-load-failed-while-importing-libcarla-1-is-not-a-valid-win32-app"></span></h6>
<blockquote>
<p>32 位 Python 版本在尝试运行脚本时会产生冲突。卸载它并仅保留所需的 Python3 x64。</p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="importerror-no-module-named-carla">ImportError: No module named 'carla' <span id="importerror-no-module-named-carla"></span></h6>
<blockquote>
<p>出现此错误的原因是 Python 找不到 Carla 库。Carla 库包含在位于<code>PythonAPI/carla/dist</code>目录中的一个<code>.egg</code>文件中，所有示例脚本都将在此目录中查找它。该<code>.egg</code>文件遵循carla-<carla-version>-py<python-version>-<operating-system>.egg 命名法。
</p>
</blockquote>
<div class="admonition 重要">
<p class="admonition-title">重要</p>
<p>Carla 仅在 0.9.12 之前的版本中使用客户端库文件 <code>.egg</code>。如果您使用的是 0.9.12+，有多种方法可以使用/安装客户端库。如果您使用客户端库（<code>.whl</code> 或 PyPi 下载）的较新方法之一，本节中的信息将与您无关。</p>
<p>在 <a href="../start_quickstart/#carla-0912"><strong>快速入门教程</strong></a> 中阅读有关使用/安装客户端库的新方法的更多信息。</p>
</div>
<blockquote>
<p>如果您使用的是打包版本的 Carla，则会有多个 <code>.egg</code> 文件，对应不同版本的 Python，具体取决于 Carla 的版本。确保您正在使用这些 Python 版本之一运行脚本。要检查默认的 Python 版本，请在命令行中键入以下内容：</p>
<pre><code>  python3 --version
  # 或者
  python --version
</code></pre>
<p>如果您从源代码构建 Python，则该<code>.egg</code> 文件将根据系统上的默认 Python 版本构建。在 Linux 中，这将是返回的默认 Python 版本：</p>
<pre><code>  /usr/bin/env python3 --version
  # 或者如果你指定 ARGS="--python-version=2"
  /usr/bin/env python2 --version
</code></pre>
<p>在 Windows 中，它将成为以下功能的默认 Python 版本：</p>
<pre><code>  py -3 --version
</code></pre>
<p>确保您使用与您的 <code>.egg</code> 文件对应的 Python 版本运行脚本.egg。在 Linux 中，您可能还需要将 Python 路径设置为指向 Carla。为此，请运行以下命令：</p>
<pre><code>  export PYTHONPATH=$PYTHONPATH:&lt;path/to/carla/&gt;/PythonAPI/carla/dist/&lt;your_egg_file&gt;
  # 检查现在 Carla 是否能发现
  python3 -c 'import carla;print("Success")'
</code></pre>
<p>请注意，虚拟环境或 Conda 等其他 Python 环境可能会使 Carla 的安装变得复杂。确保您已相应地设置 Python 默认值和路径。</p>
</blockquote>
<h6 id="runtimeerror-rpcrpc_error-during-call-in-function-apply_batch">RuntimeError: rpc::rpc_error during call in function apply_batch <span id="rpc_error"></span></h6>
<blockquote>
<p>PythonAPI的版本要和Carla服务的版本一致，比如dev分支的代码编译得到的虚幻编辑器运行的场景也要用dev分支代码编译的PythonAPI进行连接。</p>
</blockquote>
<h6 id="valueerror-sticky_control-invalid-value-type">ValueError: sticky_control: invalid value type <span id="value_error"></span></h6>
<blockquote>
<p>客户端和服务端的PythonAPI版本不一致，在dev分支开发时会出现。</p>
<p>解决：服务端是dev分支，PythonAPI也要使用在dev分支上编译的客户端。
解决2：如果确认Simulator端和客户端版本一致，但是仍然报两者版本不一致的话，先卸载客户端，然后通过<code>pip install carla</code>安装官方版本，然后再卸载安装编译版本的*.whl文件即可。</p>
</blockquote>
<hr />
<h2 id="_13">其他</h2>
<!-- ======================================================================= -->

<h6 id="fatal-error-versionh-has-been-modified-since-the-precompiled-header">Fatal error: 'version.h' has been modified since the precompiled header. <span id="fatal-error-versionh-has-been-modified-since-the-precompiled-header"></span></h6>
<blockquote>
<p>由于 Linux 更新，这种情况时常发生。Makefile 中有一个针对此问题的特殊目标。虽然花了很长时间，但解决了问题： </p>
<pre><code> make hard-clean
 make CarlaUE4Editor
</code></pre>
</blockquote>
<!-- ======================================================================= -->

<h6 id="carla_5">创建 Carla 的二进制版本。 <span id="create-a-binary-version-of-carla"></span></h6>
<blockquote>
<p>在 Linux 中，在项目文件夹中运行 <code>make package</code>。该包将包括项目和 Python API 模块。 </p>
<p>或者，可以在虚幻编辑器中编译 Carla 的二进制版本。打开 CarlaUE4 项目，转到菜单 <code>File/Package Project</code>，然后选择一个平台。可能还要等一下。 </p>
</blockquote>
<!-- ======================================================================= -->

<h6 id="linux-windows-carla">我可以在 Linux 计算机上打包适用于 Windows 的 Carla，反之亦然吗？ <span id="can-i-package-carla-for-windows-on-a-linux-machine-and-vice-versa"></span></h6>
<blockquote>
<p>虽然此功能适用于虚幻引擎，但在 Carla 中不可用。我们有许多不支持交叉编译的依赖项。</p>
</blockquote>
<!-- ======================================================================= -->
<h6 id="carla_6">如何卸载 Carla 客户端库？ <span id="how-do-i-uninstall-the-carla-client-library"></span></h6>
<blockquote>
<p>如果您使用 <strong>pip/pip3</strong> 安装了客户端库，则应通过运行以下命令将其卸载： </p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1"># Python 3</span>
pip3<span class="w"> </span>uninstall<span class="w"> </span>carla

<span class="c1"># Python 2</span>
pip<span class="w"> </span>uninstall<span class="w"> </span>carla
</code></pre></div>
<hr />
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/OpenHUTB/carla_doc" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="https://cdn.rawgit.com/knsv/mermaid/6.0.0/dist/mermaid.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script>
      <script src="../js/umlconvert.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
